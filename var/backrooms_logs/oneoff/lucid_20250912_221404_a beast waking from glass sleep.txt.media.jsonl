{"mode": "t2i", "prompt": "SELECT\n  e.id,\n  e.title,\n  concat('https://idyoveanwiuwcvgxijtz.supabase.co/storage/v1/object/public/eagle-images/', e.storage_path) AS imageUrl\nFROM eagle_images e\nCROSS JOIN LATERAL (\n  SELECT\n    to_tsvector('simple', unaccent(coalesce(e.title,'') || ' ' || array_to_string(e.tags,' '))) AS tsv,\n    plainto_tsquery('simple', unaccent('a beast waking from glass sleep')) AS q,\n    similarity(unaccent(coalesce(e.title,'')), unaccent('a beast waking from glass sleep')) AS title_sim,\n    (SELECT max(similarity(unaccent(tag), unaccent('a beast waking from glass sleep'))) FROM unnest(e.tags) AS tag) AS tag_sim\n) s\nWHERE (s.tsv @@ s.q) OR s.title_sim > 0.12 OR coalesce(s.tag_sim,0) > 0.12\nORDER BY (0.8*ts_rank_cd(s.tsv, s.q) + 0.6*s.title_sim + 0.5*coalesce(s.tag_sim,0) + 0.03*random()) DESC, e.created_at DESC\nLIMIT 3;", "task_id": null, "image_url": "https://idyoveanwiuwcvgxijtz.supabase.co/storage/v1/object/public/eagle-images/images/LVGK0HMSA9J26.jpg", "server": "supabase", "tool": "execute_sql"}
